<script>
  // Year
  document.getElementById("year").textContent = new Date().getFullYear();

  // Subscribe button alert (all pages requirement)
  const subscribeBtn = document.getElementById("subscribeBtn");
  if (subscribeBtn) {
    subscribeBtn.addEventListener("click", function () {
      alert("Thank you for subscribing.");
    });
  }

  // Contact form: browser validation FIRST, then save to localStorage, show alert, no reload
  const contactForm = document.getElementById("contactForm");

  if (contactForm) {
    contactForm.addEventListener("submit", function (event) {
      // Let the browser show built-in validation messages
      if (!contactForm.checkValidity()) {
        return;
      }

      // Valid form: prevent reload
      event.preventDefault();

      // Grab values
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const message = document.getElementById("message").value.trim();

      // Save to localStorage (Touchstone 3.2 requirement)
      const orderData = {
        name: name,
        email: email,
        message: message,
        submittedAt: new Date().toISOString()
      };

      localStorage.setItem("bookHavenCustomOrder", JSON.stringify(orderData));

      // Show alert + reset
      alert("Thank you for your message.");
      contactForm.reset();
    });
  }
</script>
